/*
 * BlueButtonEvent.cpp
 *
 *  Created on: Dec 3, 2025
 *      Author: samay099
 */

#include "BlueButtonEvent.h"
#include "stm32f4xx_hal.h"
#include"SystemState.h"
#include"SystemStateHandler.h"

SystemState CurrentState;

BlueButtonEvent::BlueButtonEvent() {
	// TODO Auto-generated constructor stub

}

BlueButtonEvent::~BlueButtonEvent() {
	// TODO Auto-generated destructor stub
}

void BlueButtonEvent::vHandleEvent()
{
	if(CurrentState == STATE_IDLE && HAL_GPIO_ReadPin(GPIOC, GPIO_PIN_13))
	{
		SystemStateHandler& SystemHandler= SystemStateHandler::getObject();
		*(SystemHandler).vTransition(STATE_RUNNING);
	}
	else if(CurrentState == STATE_RUNNING && HAL_GPIO_ReadPin(GPIOC, GPIO_PIN_13))
	{
		SystemStateHandler& SystemHandler= SystemStateHandler::getObject();
		*(SystemHandler).vTransition(STATE_CLEANUP);
	}
	/*else(HAL_GPIO_ReadPin(GPIOC, GPIO_PIN_13))
	{

	}*/
}
